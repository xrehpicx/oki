{"version":3,"sources":["../node_modules/peerjs/dist sync","components/PeerContext.tsx","components/Home/Home.tsx","App.tsx","serviceWorkerRegistration.ts","reportWebVitals.ts","index.tsx"],"names":["webpackEmptyContext","req","e","Error","code","keys","resolve","module","exports","id","PeerContext","createContext","PeerContextProvider","children","useState","peer","setPeer","history","useHistory","useEffect","Peer","nanoid","host","secure","on","console","log","localForage","setItem","err","type","window","location","reload","unlisten","listen","Provider","value","Session","className","Landing","useContext","useSpring","transform","opacity","sty","set","delay","then","push","div","style","Logo","Profile","Tooltip","title","placement","IconButton","aria-label","onClick","to","props","Loogo","width","height","viewBox","fill","fillRule","path","d","Home","exact","App","themetype","theme","createMuiTheme","palette","primary","main","light","dark","background","default","basename","ThemeProvider","isLocalhost","Boolean","hostname","match","registerValidSW","swUrl","config","navigator","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","state","controller","onUpdate","onSuccess","catch","error","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","document","getElementById","Notification","requestPermission","permission","URL","process","href","origin","addEventListener","fetch","headers","response","contentType","get","status","indexOf","ready","unregister","checkValidServiceWorker","serviceWorkerRegistration"],"mappings":"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","file":"static/js/main.b300a3ab.chunk.js","sourcesContent":["function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 87;","import React, { createContext, useEffect, useState } from \"react\";\nimport {\n  Switch,\n  Route,\n  Link,\n  useRouteMatch,\n  useParams,\n  useHistory,\n} from \"react-router-dom\";\n// utils\nimport Peer from \"peerjs\";\nimport { nanoid } from \"nanoid\";\nimport localForage from \"localforage\";\n\ninterface ContextProps {\n  peer: Peer;\n}\n\nexport const PeerContext = createContext<Partial<ContextProps>>({});\n\nexport function PeerContextProvider({ children }: { children: any }) {\n  const [peer, setPeer] = useState<Peer>();\n  const history = useHistory();\n\n  useEffect(() => {\n    const peer = new Peer(nanoid(5), {\n      host: \"ciapeer.herokuapp.com\",\n      secure: true,\n    });\n\n    peer.on(\"open\", (id) => {\n      setPeer(peer);\n      console.log(id);\n      localForage.setItem(\"peerid\", id);\n    });\n\n    peer.on(\"error\", (err) => {\n      if (err.type === \"unavailable-id\") {\n        window.location.reload();\n      }\n    });\n  }, []);\n\n  useEffect(() => {\n    const unlisten = history.listen((location) => {\n      console.log(location);\n    });\n\n    return () => {\n      unlisten();\n    };\n  }, [history]);\n\n  return (\n    <PeerContext.Provider value={{ peer }}>{children}</PeerContext.Provider>\n  );\n}\n","import * as React from \"react\";\n\nimport { useContext, useEffect, useState } from \"react\";\n\nimport {\n  Switch,\n  Route,\n  Link,\n  useRouteMatch,\n  useParams,\n  useHistory,\n  Redirect,\n} from \"react-router-dom\";\n\nimport { Collapse, IconButton, Tooltip } from \"@material-ui/core\";\nimport ShareOutlinedIcon from \"@material-ui/icons/ShareOutlined\";\n\nimport { useSpring, animated } from \"react-spring\";\nimport { PeerContext } from \"../PeerContext\";\n\nimport \"../css/home.css\";\n\ninterface HomeProps {}\n\nconst Home: React.FC<HomeProps> = () => {\n  return (\n    <div className=\".home\">\n      <Switch>\n        <Route exact path=\"/\">\n          <Landing />\n        </Route>\n        <Route path=\"/profile\">\n          <Profile />\n        </Route>\n        <Route path=\"/session:id\">\n          <Session />\n        </Route>\n      </Switch>\n    </div>\n  );\n};\n\nfunction Session() {\n  return <div className=\"session\">test</div>;\n}\n\nfunction Landing() {\n  const { peer } = useContext(PeerContext);\n  const [sty, set] = useSpring(() => ({\n    transform: \"scale(1)\",\n    opacity: 1,\n  }));\n  const history = useHistory();\n  useEffect(() => {\n    if (peer && peer.id && history) {\n      set({ transform: \"scale(0.5)\", opacity: 0, delay: 1500 }).then(() => {\n        history.push(\"/profile\");\n      });\n    }\n  }, [set, peer, history]);\n\n  return (\n    <>\n      {/* @ts-ignore */}\n      <animated.div className=\"landing\" style={sty}>\n        <Logo />\n        <p>Anonymous communication</p>\n      </animated.div>\n    </>\n  );\n}\n\nfunction Profile() {\n  const { peer } = useContext(PeerContext);\n\n  if (peer)\n    return (\n      <animated.div className=\"profile\">\n        <header>\n          <Tooltip title=\"your id\" placement=\"right\">\n            <span className=\"myid\">{peer.id}</span>\n          </Tooltip>\n          <IconButton aria-label=\"\" onClick={() => {}}>\n            <ShareOutlinedIcon />\n          </IconButton>\n        </header>\n      </animated.div>\n    );\n  return <Redirect to=\"/\" />;\n}\n\nfunction Logo(props: any) {\n  // const { peer } = useContext(PeerContext);\n  const Loogo = () => (\n    <svg width={177} height={99} viewBox=\"0 0 177 99\" {...props}>\n      <title>{\"Group 2\"}</title>\n      <g fill=\"#517DFF\" fillRule=\"evenodd\">\n        <animated.path\n          // @ts-ignore\n          /* style={{\n            ...useSpring({\n              loop: !peer ? { reverse: true } : false,\n              from: { opacity: 0 },\n              to: { opacity: 1 },\n              config: { frequency: 0.4 },\n            }),\n          }} */\n          d=\"M0 49.638c0-8.917 2.206-17.19 6.618-24.82 4.413-7.629 10.41-13.672 17.994-18.13C32.196 2.228 40.446 0 49.362 0c8.917 0 17.19 2.23 24.82 6.687 7.629 4.459 13.672 10.502 18.13 18.132C96.772 32.449 99 40.72 99 49.638c0 8.916-2.23 17.166-6.687 24.75C87.854 81.97 81.81 87.969 74.18 92.382 66.551 96.794 58.28 99 49.362 99c-9.008 0-17.281-2.137-24.819-6.412-7.537-4.274-13.512-10.157-17.925-17.649C2.206 67.448 0 59.014 0 49.638zm3-.362c0 8.387 2.08 16.174 6.241 23.362 4.16 7.189 9.762 12.88 16.803 17.072C33.086 93.903 40.721 96 48.951 96c8.505 0 16.369-2.097 23.593-6.29s12.94-9.883 17.146-17.072C93.897 65.45 96 57.617 96 49.138c0-8.386-2.103-16.196-6.31-23.43-4.206-7.235-9.899-12.995-17.077-17.28C65.434 4.143 57.684 2 49.363 2c-8.596 0-16.437 2.166-23.525 6.497-7.087 4.331-12.665 10.137-16.734 17.418C5.034 33.195 3 40.982 3 49.276z\"\n          fillRule=\"nonzero\"\n        />\n        <path d=\"M174.416 48.994v49.518h-2.62V48.994zM170.224 33.405c0-.786.284-1.463.851-2.03.568-.568 1.289-.852 2.162-.852.786 0 1.463.284 2.03.852.568.567.852 1.244.852 2.03 0 .786-.284 1.463-.852 2.03-.567.568-1.244.852-2.03.852-.786 0-1.485-.306-2.096-.917s-.917-1.266-.917-1.965z\" />\n        <g>\n          <path d=\"M128.21 69.168l-9.431 8.908v20.436h-2.62V0h2.62v75.063l28.95-26.986 1.704 1.441-19.257 17.947 22.663 31.047h-3.013z\" />\n        </g>\n      </g>\n    </svg>\n  );\n\n  return <Loogo />;\n}\n\nexport default Home;\n","import React, { useState } from \"react\";\n\nimport { BrowserRouter as Router } from \"react-router-dom\";\n//components\nimport Home from \"./components/Home/Home\";\n\n// external components\nimport { createMuiTheme, ThemeProvider } from \"@material-ui/core/styles\";\n\nimport \"./App.css\";\nimport { PeerContextProvider } from \"./components/PeerContext\";\n\nfunction App() {\n  const [themetype, setThemetype] = useState<\"dark\" | \"light\">(\"light\");\n\n  const theme = createMuiTheme({\n    palette: {\n      type: themetype,\n      primary: {\n        main: \"#517DFF\",\n        light: \"#517DFF\",\n        dark: \"#517DFF\",\n      },\n      background: {\n        default: themetype === \"dark\" ? \"#12192F\" : \"white\",\n      },\n    },\n  });\n\n  return (\n    <Router basename=\"/oki\">\n      <PeerContextProvider>\n        <ThemeProvider {...{ theme }}>\n          <Home />\n        </ThemeProvider>\n      </PeerContextProvider>\n    </Router>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://cra.link/PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://cra.link/PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://cra.link/PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log('No internet connection found. App is running in offline mode.');\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then((registration) => {\n        registration.unregister();\n      })\n      .catch((error) => {\n        console.error(error.message);\n      });\n  }\n}\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport * as serviceWorkerRegistration from \"./serviceWorkerRegistration\";\nimport reportWebVitals from \"./reportWebVitals\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://cra.link/PWA\n\nNotification.requestPermission((permission) => {});\nserviceWorkerRegistration.register();\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}